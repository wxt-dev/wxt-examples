<!-- Generated by scripts/generate-diffs.ts -->

# Messaging - One Time Requests

> Based off the [`vanilla`](https://github.com/wxt-dev/wxt/tree/main/templates/vanilla) template.
>
> ```sh
> npx wxt@latest init --template vanilla
> ```

This example demonstrates how to send messages to and from your background script. In this case, the popup makes a request to the background.

###### entrypoints/popup/main.ts

```diff
@@ -19,6 +19,11 @@ document.querySelector<HTMLDivElement>('#app')!.innerHTML = `
       Click on the WXT and TypeScript logos to learn more
     </p>
   </div>
 `;

 setupCounter(document.querySelector<HTMLButtonElement>('#counter')!);
+
+console.log('Popup sending:', 'ping');
+browser.runtime.sendMessage('ping').then((response) => {
+  console.log('Popup response:', response);
+});
```

The background recieves the message, and returns a response.

###### entrypoints/background.ts

```diff
@@ -1,3 +1,9 @@
 export default defineBackground(() => {
   console.log('Hello background!', { id: browser.runtime.id });
+
+  browser.runtime.onMessage.addListener(async (message) => {
+    console.log('Background recieved:', message);
+    console.log('Background sending:', 'pong');
+    return 'pong';
+  });
 });
```

With this code, you should see the following logs when inspecting the popup in dev tools:

```
Popup sending: ping
Background recieved: ping
Background sending: pong
Popup response: pong
```

---

### Other File Changes

###### package.json

```diff
@@ -12,10 +12,10 @@
     "zip": "wxt zip",
     "zip:firefox": "wxt zip -b firefox",
     "compile": "tsc --noEmit",
     "postinstall": "wxt prepare"
   },
   "devDependencies": {
-    "typescript": "^5.3.2",
-    "wxt": "^0.11.0"
+    "typescript": "^5.1.6",
+    "wxt": "^0.10.0"
   }
 }
```
